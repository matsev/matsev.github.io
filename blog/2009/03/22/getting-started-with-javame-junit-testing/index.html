<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Getting Started with JavaME jUnit Testing - Random Code Ramblings</title>
<meta name="description" content="Introduction">


  <meta name="author" content="Mattias Severson">
  
  <meta property="article:author" content="Mattias Severson">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Random Code Ramblings">
<meta property="og:title" content="Getting Started with JavaME jUnit Testing">
<meta property="og:url" content="https://matsev.github.io/blog/2009/03/22/getting-started-with-javame-junit-testing/">


  <meta property="og:description" content="Introduction">







  <meta property="article:published_time" content="2009-03-22T00:00:00+01:00">






<link rel="canonical" href="https://matsev.github.io/blog/2009/03/22/getting-started-with-javame-junit-testing/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mattias Severson",
      "url": "https://matsev.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Random Code Ramblings Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Random Code Ramblings
          <span class="site-subtitle">offloading a software engineer's mind</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/blog/" title="Software related blog posts">Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/talks/" title="Presentations that I have made">Talks</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" title="Information about me and this web site">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/mattias-severson.jpg" alt="Mattias Severson" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Mattias Severson</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Senior Software Engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Malmö, Sweden</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      
        <li>
          <a href="https://twitter.com/mattiasseverson" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://stackoverflow.com/users/303598/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Getting Started with JavaME jUnit Testing">
    <meta itemprop="description" content="Introduction">
    <meta itemprop="datePublished" content="2009-03-22T00:00:00+01:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Getting Started with JavaME jUnit Testing
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#introduction">Introduction</a></li><li><a href="#powermock">PowerMock</a></li><li><a href="#project-configuration">Project configuration</a></li><li><a href="#automation">Automation</a></li><li><a href="#whats-next">What’s next?</a></li></ul>

            </nav>
          </aside>
        
        <h3 id="introduction">Introduction</h3>

<p>Unit testing is a very powerful tool that should be included in every developer’s toolbox. Unfortunately, this has not always been the case, especially not among MIDlet developers. One reason is that JavaME projects usually are small (compared to Java SE projects), which implies that manual testing could be enough. However, as soon as you start developing production code you really should consider to automate your tests by developing your own test suite. Some of you may have played around with <a href="http://sourceforge.net/projects/jmunit">JMUnit</a> project. It is a nice framework that allows you to write tests that can be transferred to your phone or emulator and you will see the test result on the display. Alternatively, the tests can be executed by Ant. Still, there are some limitations that you cannot bypass:</p>

<ul>
  <li>Because of CLDC’s lack of reflection, you cannot benefit from the powers of <a href="http://www.junit.org/">jUnit 4.x</a>.</li>
  <li>You cannot create mock objects. This means that if a class has dependencies to other classes you will perform an integration test rather than a <em>unit</em> test.</li>
  <li>The turn around time for test, debug and retest, is significantly larger compared to Java SE unit testing, especially if you are executing the test on the phone.</li>
</ul>

<p>No offence to the JMUnit guys, they are restricted by the limitations of the CLDC VM and the fact that you need a target device (a phone or an emulator) to run the tests on. But maybe there is a workaround to solve these problems? With some tricks, it is possible to unit test your JavaME code in the same way as you would unit test your Java SE code. In other words, you can execute the tests <em>on the PC side without deploying the tests to an emulator or a phone</em>.</p>

<h3 id="powermock">PowerMock</h3>

<p>One part of the solution is to mock any platform dependencies. Previously, it was an awkward job to do, but the introduction of <a href="http://code.google.com/p/powermock/">PowerMock</a> allows us to mock the many static methods in MIDP and CLDC. The easiest way to get started with powermock is to download the <a href="http://code.google.com/p/powermock/downloads/list">powermock-1.2-with-dependencies.zip</a>. In another <a href="/blog/2009/03/22/how-to-mock-midp-recordstore/">post</a> I have explained how PowerMock can be used to mock the RecordStore in MIDP.</p>

<h3 id="project-configuration">Project configuration</h3>

<p>If you are using Eclipse, you need two projects, one for your phone application and the other your test code. This is because different projects can have different java compiler settings.</p>

<ul>
  <li>Create a <em>MIDlet</em> project. This is your phone application. Make sure that the “Java Compiler” compliance level is “1.3”.</li>
  <li>Create a <em>Java</em> project. This is the test project where you will write your tests. Make sure that the “Java Compiler” compliance level is set to “1.6” (or to whatever JDK version you have installed).
    <ul>
      <li>Add the midlet project you just created to “Required projects” in the “Java Build Path” setting.</li>
      <li>Add the PowerMock jar files and their dependencies to “Libraries” in the “Java Build Path” setting.</li>
    </ul>
  </li>
</ul>

<p>In the MIDlet project, you write your application code and in the java test project you write your java jUnit tests. Normal package protection rules apply, so you should consider to reuse the package name from the class in the midlet project you would like to test when you are writing the test class in the java project.</p>

<h3 id="automation">Automation</h3>

<p>Naturally, it is possible to automate the test by using build tools. Here is an example using of an Ant build.xml file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--?xml version="1.0" encoding="UTF-8"?--&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"Example"</span> <span class="na">default=</span><span class="s">"test"</span> <span class="na">basedir=</span><span class="s">"."</span><span class="nt">&gt;</span>

	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"midlet.project.home"</span> <span class="na">value=</span><span class="s">"C:/your_workspace/MidletProject"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"test.project.home"</span> <span class="na">value=</span><span class="s">"C:/your_workspace/MidletProjectTest"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"powermock.home"</span> <span class="na">value=</span><span class="s">"C:/your_path/powermock-1.2"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"wtk.home"</span> <span class="na">value=</span><span class="s">"C:/WTK2.5.2"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"src.dir"</span> <span class="na">value=</span><span class="s">"${midlet.project.home}/src"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"test.src.dir"</span> <span class="na">value=</span><span class="s">"${test.project.home}/src"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"bin.dir"</span> <span class="na">value=</span><span class="s">"classes"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"test.bin.dir"</span> <span class="na">value=</span><span class="s">"test-classes"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"test.result.dir"</span> <span class="na">value=</span><span class="s">"test-result"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;path</span> <span class="na">id=</span><span class="s">"midlet.dependencies"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">"${wtk.home}/lib"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">"*.jar"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;/include&gt;&lt;/fileset&gt;</span>
	<span class="nt">&lt;/path&gt;</span>

	<span class="nt">&lt;path</span> <span class="na">id=</span><span class="s">"test.dependencies"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${bin.dir}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;path</span> <span class="na">refid=</span><span class="s">"midlet.dependencies"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">"${powermock.home}"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;/fileset&gt;&lt;/path&gt;</span>

	<span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"clean"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">"${bin.dir}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">"${test.bin.dir}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">"${test.result.dir}"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;/delete&gt;&lt;/delete&gt;&lt;/delete&gt;&lt;/target&gt;</span>

	<span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"compile"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">"${bin.dir}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;javac</span> <span class="na">srcdir=</span><span class="s">"${src.dir}"</span> <span class="na">destdir=</span><span class="s">"${bin.dir}"</span> <span class="na">source=</span><span class="s">"1.3"</span> <span class="na">target=</span><span class="s">"1.1"</span> <span class="na">classpathref=</span><span class="s">"midlet.dependencies"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;/javac&gt;&lt;/mkdir&gt;&lt;/target&gt;</span>

	<span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"compile-tests"</span> <span class="na">depends=</span><span class="s">"compile"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">"${test.bin.dir}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;javac</span> <span class="na">srcdir=</span><span class="s">"${test.src.dir}"</span> <span class="na">destdir=</span><span class="s">"${test.bin.dir}"</span> <span class="na">classpathref=</span><span class="s">"test.dependencies"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;/javac&gt;&lt;/mkdir&gt;&lt;/target&gt;</span>

	<span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"test"</span> <span class="na">depends=</span><span class="s">"clean, compile-tests"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">"${test.result.dir}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;junit</span> <span class="na">printsummary=</span><span class="s">"yes"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">"test.dependencies"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;classpath</span> <span class="na">path=</span><span class="s">"${test.bin.dir}"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;formatter</span> <span class="na">type=</span><span class="s">"plain"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;batchtest</span> <span class="na">fork=</span><span class="s">"yes"</span> <span class="na">todir=</span><span class="s">"${test.result.dir}"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">"${test.src.dir}"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;/fileset&gt;&lt;/batchtest&gt;</span>
		<span class="nt">&lt;/formatter&gt;&lt;/classpath&gt;&lt;/classpath&gt;&lt;/junit&gt;</span>
	<span class="nt">&lt;/mkdir&gt;&lt;/target&gt;</span>

<span class="nt">&lt;/pathelement&gt;&lt;/path&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/property&gt;&lt;/project&gt;</span>
</code></pre></div></div>

<p>Now your project configuration is setup and you can test your MIDlet code in the same way as you would test your Java SE code.</p>

<h3 id="whats-next">What’s next?</h3>

<p>If you are a dedicated MIDlet developer you would probably like to add more build targets later on to preverify, obfuscate, sign, package and deploy your MIDlet. You should also consider using a continuous integration server together with your version control system and configure it to run your test suite whenever the code has been changed. Depending on the server you choose, you may also find that it may be used to present result from static code analysis tools, code coverage, code metrics and so on.</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2009-03-22T00:00:00+01:00">March 22, 2009</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2008/02/01/oredev-2007/" class="pagination--pager" title="Øredev 2007
">Previous</a>
    
    
      <a href="/blog/2009/03/22/how-to-mock-midp-recordstore/" class="pagination--pager" title="How to mock MIDP RecordStore
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/12/02/serverless-twilio-dictionary/" rel="permalink">Serverless Twilio Dictionary
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">I recently started working at Twilio, a communications company that enables services like voice, text, chat and video globally through APIs. As part of the o...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/10/11/eventbridge-ec2-spot-instances/" rel="permalink">EventBridge and EC2 Spot Instances
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">In a recent project, we were using AWS EC2 Spot instances as part of our cloud test environment. A good solution which catered for cost savings, but as expec...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/09/01/automating-dependency-updates/" rel="permalink">Automating Dependency Updates
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Updating project dependencies is a task that is often neglected, especially in legacy projects that are “done” and just work without changes. It is easy to u...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/03/23/aws-cdk-mfa/" rel="permalink">AWS CDK MFA
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">The AWS CDK (Cloud Development Kit) is a welcome contribution to the “Infrastructure as Code” family. It is a development framework that allows you to config...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Mattias Severson. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
