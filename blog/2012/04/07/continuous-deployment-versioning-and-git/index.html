<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Continuous Deployment, Versioning and Git - Random Code Ramblings</title>
<meta name="description" content="So you have heard about continuous delivery and continuous deployment and you are eager to try, but your manager is afraid that you will lose traceability of the project. How can frequent updates of your binaries be tracked in a rapidly progressive environment, where every commit is a potential release?">


  <meta name="author" content="Mattias Severson">
  
  <meta property="article:author" content="Mattias Severson">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Random Code Ramblings">
<meta property="og:title" content="Continuous Deployment, Versioning and Git">
<meta property="og:url" content="https://matsev.github.io/blog/2012/04/07/continuous-deployment-versioning-and-git/">


  <meta property="og:description" content="So you have heard about continuous delivery and continuous deployment and you are eager to try, but your manager is afraid that you will lose traceability of the project. How can frequent updates of your binaries be tracked in a rapidly progressive environment, where every commit is a potential release?">







  <meta property="article:published_time" content="2012-04-07T00:00:00+02:00">






<link rel="canonical" href="https://matsev.github.io/blog/2012/04/07/continuous-deployment-versioning-and-git/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mattias Severson",
      "url": "https://matsev.github.io/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Random Code Ramblings Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Random Code Ramblings
          <span class="site-subtitle">offloading a software engineer's mind</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/blog/" title="Software related blog posts">Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/talks/" title="Presentations that I have made">Talks</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" title="Information about me and this web site">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/mattias-severson.jpg" alt="Mattias Severson" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Mattias Severson</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Senior Software Engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Malm√∂, Sweden</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      
        <li>
          <a href="https://twitter.com/mattiasseverson" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://stackoverflow.com/users/303598/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Continuous Deployment, Versioning and Git">
    <meta itemprop="description" content="So you have heard about continuous delivery and continuous deployment and you are eager to try, but your manager is afraid that you will lose traceability of the project. How can frequent updates of your binaries be tracked in a rapidly progressive environment, where every commit is a potential release?">
    <meta itemprop="datePublished" content="2012-04-07T00:00:00+02:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Continuous Deployment, Versioning and Git
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#artifact-version-vs-commit">Artifact Version vs. Commit</a></li>
  <li><a href="#buildnumber-maven-plugin">buildnumber-maven-plugin</a></li>
  <li><a href="#advertise-the-build-number">Advertise the Build Number</a>
    <ul>
      <li><a href="#manifest-entry">Manifest Entry</a></li>
      <li><a href="#properties-file">Properties File</a></li>
      <li><a href="#static-method-call">Static Method Call</a></li>
      <li><a href="#web-service-resource">Web Service Resource</a></li>
      <li><a href="#web-projects">Web Projects</a></li>
    </ul>
  </li>
  <li><a href="#wrap-up">Wrap Up</a></li>
  <li><a href="#references">References</a></li>
  <li><a href="#edit">Edit</a></li>
</ul>

            </nav>
          </aside>
        
        <p>So you have heard about continuous delivery and continuous deployment and you are eager to try, but your manager is afraid that you will lose traceability of the project. How can frequent updates of your binaries be tracked in a rapidly progressive environment, where every commit is a potential release?</p>

<h2 id="artifact-version-vs-commit">Artifact Version vs. Commit</h2>

<p>The traditional Java community way of version handling with a three digit number, potentially followed by a build number or a qualifier, e.g. <em>1.2.3.RELEASE</em>, works well if you have long development cycles with the occasional bugfix release in between. The problem is that it does not scale when the frequency of releases increases by a magnitude or two. Imagine what your version control system would look like if every commit had its own release branch, or if you manually had to update your dependencies several times daily. Consequently, the notion of snapshot releases has been adopted to indicate that you are working with a moving target. The tradeoff is that the traceability is lost, because one snapshot version refers to many different versions of the software. Different workarounds that allow developers to identify specific snapshots have been introduced to overcome this problem. For example, Maven adds a timestamp when the artifact is <a href="http://maven.apache.org/plugins/maven-deploy-plugin/examples/disabling-timestamps-suffix.html">deployed</a> to a repository and Jenkins can generate a <a href="https://wiki.jenkins-ci.org/display/JENKINS/Fingerprint">fingerprint</a> for a binary. Both these methods enable tracking of the <em>artifact version</em> which is good, but they do not tell the complete story. Once you have pinpointed the specific artifact, you need to consult the build log to find out the corresponding <em>commit</em> before you can checkout the code and start debugging. Wouldn‚Äôt it be nice if you could get the correct source code from the version control system immediately, without the detour to the build log? With Git, a 40 digit <a href="http://en.wikipedia.org/wiki/SHA-1">SHA-1</a> hash sum is calculated for each commit, making it the perfect candidate to add traceability to your project.</p>

<h2 id="buildnumber-maven-plugin">buildnumber-maven-plugin</h2>

<p>It turns out that the <a href="http://mojo.codehaus.org/buildnumber-maven-plugin/">buildnumber-maven-plugin</a> is the tool for the job. Unfortunately, the documentation on its web page is quite scarce, but we can get some more information by executing the plugin itself:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mvn buildnumber:help
<span class="o">[</span>...]
This mojo is designed to give you a build number. So when you might make 100 builds of version 1.0-SNAPSHOT,
you can differentiate between them all. The build number is based on the revision number retrieved from scm.
<span class="o">[</span>...]
</code></pre></div></div>

<p>You can access the build number in your pom with <code class="language-plaintext highlighter-rouge">${buildNumber}</code>. Looks promising, we add the following lines to the <code class="language-plaintext highlighter-rouge">&lt;build&gt;&lt;plugins&gt;</code> section in our pom file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupid&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupid&gt;</span>
    <span class="nt">&lt;artifactid&gt;</span>buildnumber-maven-plugin<span class="nt">&lt;/artifactid&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;phase&gt;</span>validate<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
                <span class="nt">&lt;goal&gt;</span>create<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
         <span class="nt">&lt;/execution&gt;</span>
    <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div>

<p>And then we attempt to validate the project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mvn validate
<span class="o">[</span>ERROR] Failed to execute goal org.codehaus.mojo:buildnumber-maven-plugin:1.1:create <span class="o">(</span>default<span class="o">)</span>
<span class="o">[</span>...]
Execution default of goal org.codehaus.mojo:buildnumber-maven-plugin:1.1:create failed:
The scm url cannot be null.
</code></pre></div></div>

<p>Ok, the plugin seems to be looking for a <a href="http://maven.apache.org/scm/maven-scm-plugin/usage.html#Configuring_SCM">&lt;scm&gt;</a> configuration tag in the pom (to be more specific, it is actually looking for a <code class="language-plaintext highlighter-rouge">&lt;scm&gt;&lt;connection&gt;</code> or a <code class="language-plaintext highlighter-rouge">&lt;scm&gt;&lt;developerConnection&gt;</code> tag), let‚Äôs add one. In order to do that, you also need to add the <a href="http://maven.apache.org/scm/git.html">Git URLs</a> to your repository:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;scm&gt;</span>
    <span class="c">&lt;!-- Replace the connection below with your project connection --&gt;</span>
    <span class="nt">&lt;connection&gt;</span>scm:git:git://github.com/matsev/git-build-number.git<span class="nt">&lt;/connection&gt;</span>
<span class="nt">&lt;/scm&gt;</span>
</code></pre></div></div>

<p>Revalidate the project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mvn validate
<span class="o">[</span>...]
<span class="o">[</span>INFO] Storing buildNumber: 8ceb5be9376a6ebe34e90d78f57f524d123437a9 at timestamp: 1333643345784
</code></pre></div></div>

<p>Let‚Äôs compare with the current Git SHA-1:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git show <span class="nt">-s</span>
commit 8ceb5be9376a6ebe34e90d78f57f524d123437a9
</code></pre></div></div>

<p>Excellent, now we have a Maven <code class="language-plaintext highlighter-rouge">${buildNumber}</code> variable with the current Git SHA-1 value that we can use in our project!</p>

<h2 id="advertise-the-build-number">Advertise the Build Number</h2>

<p>Now, the question arises how we can utilize the <code class="language-plaintext highlighter-rouge">${buildNumber}</code> in the best way. The most important thing is to advertise it to your users, let them be a developer of a dependent module, a tester at the Q/A department, a remote client application, a random Internet user or even yourself. Depending on the project type, different suggestions come to mind. I have created a project on <a href="https://github.com/matsev/git-build-number">GitHub</a> with working implementations of the examples below.</p>

<h3 id="manifest-entry">Manifest Entry</h3>

<p>If your users have access to the binary artifact, it can make sense to add the build number as an entry in the project‚Äôs <code class="language-plaintext highlighter-rouge">MANIFEST.MF</code> file. For example, the <a href="http://maven.apache.org/plugins/maven-war-plugin/examples/war-manifest-guide.html">maven-war-plugin</a> can be configured to add a <code class="language-plaintext highlighter-rouge">Git-SHA-1</code> entry for a <em>.war</em> project:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupid&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupid&gt;</span>
    <span class="nt">&lt;artifactid&gt;</span>maven-war-plugin<span class="nt">&lt;/artifactid&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.1.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;archive&gt;</span>
            <span class="nt">&lt;manifest&gt;</span>
                <span class="nt">&lt;adddefaultimplementationentries&gt;</span>true<span class="nt">&lt;/adddefaultimplementationentries&gt;</span>
            <span class="nt">&lt;/manifest&gt;</span>
            <span class="nt">&lt;manifestentries&gt;</span>
                <span class="nt">&lt;git-sha-1&gt;</span>${buildNumber}<span class="nt">&lt;/git-sha-1&gt;</span>
            <span class="nt">&lt;/manifestentries&gt;</span>
        <span class="nt">&lt;/archive&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div>

<p>Similarly, you can configure the <a href="http://maven.apache.org/shared/maven-archiver/examples/manifestEntries.html">maven-jar-plugin</a> to add manifest entry for a <em>.jar</em> project. Note, if your artifact is signed, you should <em>not</em> use the key <code class="language-plaintext highlighter-rouge">SHA1-Digest</code> as the manifest entry, because it is used during <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Signature_Validation">signature validation</a>.</p>

<h3 id="properties-file">Properties File</h3>

<p>Alternatively, a simple <code class="language-plaintext highlighter-rouge">buildNumber.properties</code> file may suit your need:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">git-sha-1</span><span class="p">=</span><span class="s">${buildNumber}</span>
</code></pre></div></div>

<p>The file must be <a href="http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html">filtered</a> so that the value gets assigned:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;resource&gt;</span>
        <span class="c">&lt;!-- You may have a different path for your properties file --&gt;</span>
        <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/resources<span class="nt">&lt;/directory&gt;</span>
        <span class="nt">&lt;filtering&gt;</span>true<span class="nt">&lt;/filtering&gt;</span>
    <span class="nt">&lt;/resource&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<h3 id="static-method-call">Static Method Call</h3>

<p>If you implemented the property file solution above, you might as well create helper class that wraps the build number in a static method call:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PropertiesFileReader</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Properties</span> <span class="n">properties</span><span class="o">;</span>

    <span class="cm">/** Use a static initializer to read from file. */</span>
    <span class="kd">static</span> <span class="o">{</span>
        <span class="nc">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="nc">PropertieFileReader</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">"/buildNumber.properties"</span><span class="o">);</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">properties</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Failed to read properties file"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">inputStream</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">inputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">// Ignore</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/** Hide default constructor. */</span>
    <span class="kd">private</span> <span class="nf">PropertiesFileReader</span><span class="o">()</span> <span class="o">{}</span>

    <span class="cm">/**
     * Gets the Git SHA-1.
     * @return A {@code String} with the Git SHA-1.
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getGitSha1</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">properties</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"git-sha-1"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="web-service-resource">Web Service Resource</h3>

<p>Sometimes your users do not have direct access to your artifacts, but don‚Äôt let that stop you from sharing the build number. With a little <em>[insert your favorite web framework here]</em> magic, you can publish the build number as a web service resource. Below is an example of a <a href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-controller">Spring Controller</a>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BuildNumberController</span> <span class="o">{</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/git-sha-1"</span><span class="o">,</span> <span class="n">produces</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span>
    <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getGitSha1</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">gitSha1</span> <span class="o">=</span> <span class="nc">PropertiesFileReader</span><span class="o">.</span><span class="na">getGitSha1</span><span class="o">();</span>
        <span class="k">return</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">singletonMap</span><span class="o">(</span><span class="s">"git-sha-1"</span><span class="o">,</span> <span class="n">gitSha1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Put into practice:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl localhost:8080/build-number/git-sha-1
<span class="o">{</span><span class="s2">"git-sha-1"</span>:<span class="s2">"8ceb5be9376a6ebe34e90d78f57f524d123437a9"</span><span class="o">}</span>
</code></pre></div></div>

<h3 id="web-projects">Web Projects</h3>

<p>If you are a front-end web developer, one option is to embed the build number in the webpage itself, such as in an ever popular about box. A more subtle way is to inline it as an html comment in the <code class="language-plaintext highlighter-rouge">index.html</code> file:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Git SHA-1: ${buildNumber} --&gt;</span>
</code></pre></div></div>

<p>Since we are dealing with a web project, the <a href="http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html#Filtering">filtering</a> works differently:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;groupid&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupid&gt;</span>
<span class="nt">&lt;artifactid&gt;</span>maven-war-plugin<span class="nt">&lt;/artifactid&gt;</span>
<span class="nt">&lt;version&gt;</span>2.1.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;webresources&gt;</span>
        <span class="nt">&lt;webresource&gt;</span>
            <span class="c">&lt;!-- You may have to change the path below if your index.html is located elsewhere --&gt;</span>
            <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/webapp<span class="nt">&lt;/directory&gt;</span>
            <span class="nt">&lt;filtering&gt;</span>true<span class="nt">&lt;/filtering&gt;</span>
        <span class="nt">&lt;/webresource&gt;</span>
    <span class="nt">&lt;/webresources&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<h2 id="wrap-up">Wrap Up</h2>

<p>Given that you now have a tool for managing artifact versions, should you stop making formal releases of your software? Front end web development is one area where the traditional release management may be questioned. The build server can continuously deploy successful builds to production and yet it is easy to find out exactly which commit that is currently used. Framework development on the other hand is a completely different story, considering the nature of the Java ecosystem where all dependency management rely on stable releases. Additionally, if you need a build number in a human readable format, the Git SHA-1 with its 40-digit string is probably not what you are looking for. The good news is that one solution does not exclude the other. If you would like beta testers to verify critical bug fixes or developers to start using the latest bleeding edge features in a snapshot release, you can benefit from using both the traditional version numbering as well as a commit specific identifier.</p>

<h2 id="references">References</h2>

<ul>
  <li>Example project on <a href="https://github.com/matsev/git-build-number">GitHub</a></li>
  <li>Maven <a href="http://mojo.codehaus.org/buildnumber-maven-plugin/">buildnumber-maven-plugin</a></li>
  <li>The buildnumber-maven-plugin help command <code class="language-plaintext highlighter-rouge">mvn buildnumber:help -Ddetail=true</code></li>
  <li>Maven <a href="http://maven.apache.org/scm/maven-scm-plugin/usage.html#Configuring_SCM">&lt;scm&gt;</a> configuration</li>
  <li>Maven <code class="language-plaintext highlighter-rouge">&lt;scm&gt;</code> <a href="http://maven.apache.org/scm/git.html">Git URL</a> configuration</li>
  <li>Configuring a manifest file with aid of the <a href="http://maven.apache.org/plugins/maven-war-plugin/examples/war-manifest-guide.html">maven-war-plugin</a></li>
  <li>Configuring a manifest file with aid of the <a href="http://maven.apache.org/shared/maven-archiver/examples/manifestSections.html">maven-jar-plugin</a></li>
  <li>Using the <a href="http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html">maven-resource-plugin</a> to filter resources</li>
  <li>Using the <a href="http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html#Filtering">maven-war-plugin</a> to filter web resources</li>
</ul>

<h2 id="edit">Edit</h2>

<p>Oct 15th, 2012: Updated the blog post to include the version 1.1 of the <code class="language-plaintext highlighter-rouge">buildnumber-maven-plugin</code> because the 1.0 version <a href="http://jira.codehaus.org/browse/MBUILDNUM-92">had a bug</a> that caused it to fail if executed from another process, e.g. within an IDE. Additionally, the reference project was updated to include all the latest versions of the dependencies and plugins.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2012-04-07T00:00:00+02:00">April 7, 2012</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2012/02/25/mockito-and-dependency-injection/" class="pagination--pager" title="Mockito and Dependency Injection
">Previous</a>
    
    
      <a href="/blog/2012/09/08/spring-controller-tests-20/" class="pagination--pager" title="Spring Controller Tests 2.0
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/12/02/serverless-twilio-dictionary/" rel="permalink">Serverless Twilio Dictionary
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">I recently started working at Twilio, a communications company that enables services like voice, text, chat and video globally through APIs. As part of the o...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/10/11/eventbridge-ec2-spot-instances/" rel="permalink">EventBridge and EC2 Spot Instances
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">In a recent project, we were using AWS EC2 Spot instances as part of our cloud test environment. A good solution which catered for cost savings, but as expec...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/09/01/automating-dependency-updates/" rel="permalink">Automating Dependency Updates
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Updating project dependencies is a task that is often neglected, especially in legacy projects that are ‚Äúdone‚Äù and just work without changes. It is easy to u...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/03/23/aws-cdk-mfa/" rel="permalink">AWS CDK MFA
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">The AWS CDK (Cloud Development Kit) is a welcome contribution to the ‚ÄúInfrastructure as Code‚Äù family. It is a development framework that allows you to config...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Mattias Severson. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
