<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Working Efficiently with Gradle Modules - Random Code Ramblings</title>
<meta name="description" content="Blog post about how different Gradle command line options and tasks can improve your efficiency when working with a multi-module Gradle project.">


  <meta name="author" content="Mattias Severson">
  
  <meta property="article:author" content="Mattias Severson">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Random Code Ramblings">
<meta property="og:title" content="Working Efficiently with Gradle Modules">
<meta property="og:url" content="https://matsev.github.io/blog/2015/12/06/working-efficiently-with-gradle-modules/">


  <meta property="og:description" content="Blog post about how different Gradle command line options and tasks can improve your efficiency when working with a multi-module Gradle project.">







  <meta property="article:published_time" content="2015-12-06T00:00:00+01:00">






<link rel="canonical" href="https://matsev.github.io/blog/2015/12/06/working-efficiently-with-gradle-modules/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mattias Severson",
      "url": "https://matsev.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Random Code Ramblings Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Random Code Ramblings
          <span class="site-subtitle">offloading a software engineer's mind</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/blog/" title="Software related blog posts">Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/talks/" title="Presentations that I have made">Talks</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" title="Information about me and this web site">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/mattias-severson.jpg" alt="Mattias Severson" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Mattias Severson</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Senior Software Engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Malmö, Sweden</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      
        <li>
          <a href="https://twitter.com/mattiasseverson" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://stackoverflow.com/users/303598/matsev" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Working Efficiently with Gradle Modules">
    <meta itemprop="description" content="Blog post about how different Gradle command line options and tasks can improve your efficiency when working with a multi-module Gradle project.">
    <meta itemprop="datePublished" content="2015-12-06T00:00:00+01:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Working Efficiently with Gradle Modules
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#project">Project</a></li><li><a href="#build">Build</a></li><li><a href="#build-needed">Build Needed</a></li><li><a href="#build-dependents">Build Dependents</a></li><li><a href="#avoid-rebuilding-project-dependencies">Avoid Rebuilding Project Dependencies</a></li><li><a href="#references">References</a></li></ul>

            </nav>
          </aside>
        
        <p>Gradle has the ability to check if a task is up to date and more importantly <a href="https://docs.gradle.org/2.9/userguide/more_about_tasks.html#sec:up_to_date_checks">skip the task</a> if it finds that the task input is unchanged compared to the latest build. This feature results in significant build time reductions, but as we will see in this blog post we can do even better if we know what module(s) we would like to build. A couple of years ago, I wrote a similar <a href="/blog/2013/06/09/working-efficiently-with-maven-modules/">blog post</a> about how you can work more efficiently with Maven by being selective when building your multi-module project. This blog post deals with the same issue, however this time Gradle is used.</p>

<h2 id="project">Project</h2>

<p>Let us assume that we have a project structure with the modules below and that we will add a new feature to the <code class="language-plaintext highlighter-rouge">b1</code> module:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parent
|
├── a
│   ├── a1
│   └── a2
|
├── b
│   ├── b1              <span class="o">(</span>module under development, depends on a1<span class="o">)</span>
│   └── b2
|
├── itest               <span class="o">(</span>integration tests<span class="o">)</span>
|   |
│   ├── a-itest
│   │   ├── a1-itest    <span class="o">(</span>depends on a1<span class="o">)</span>
│   │   └── a2-itest    <span class="o">(</span>depends on a2<span class="o">)</span>
│   │
│   └── b-itest
│       ├── b1-itest    <span class="o">(</span>depends on b1<span class="o">)</span>
│       └── b2-itest    <span class="o">(</span>depends on b2<span class="o">)</span>
</code></pre></div></div>

<p>If you open a terminal in the <code class="language-plaintext highlighter-rouge">parent</code> folder and execute <code class="language-plaintext highlighter-rouge">gradle build</code>, then all projects will be compiled, the tests will be executed, integration tests will be executed and so on. All is good, but it may take a while before all work has been completed. In the following example, we will see how it is possible to work on the <code class="language-plaintext highlighter-rouge">b1</code> module without rebuilding the non-dependent <code class="language-plaintext highlighter-rouge">a2*</code> and <code class="language-plaintext highlighter-rouge">b2*</code> modules.</p>

<h2 id="build">Build</h2>

<p>When you update your code from version control before you start working on a new feature, it is a good idea to make sure that the module you will work with is in a good state. If you trust your continuous integration server, it should be sufficient to build just that specific module and the modules that it depends on. The <a href="https://docs.gradle.org/2.9/userguide/java_plugin.html">Java plugin’s</a> <code class="language-plaintext highlighter-rouge">build</code> task does exactly that. There are a few different ways to specify which module should be built. For example, if you would like to build <code class="language-plaintext highlighter-rouge">b1</code> you can target it by either its (sub)module name followed by the <code class="language-plaintext highlighter-rouge">build</code> task:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle :b:b1:build
</code></pre></div></div>

<p>or you can target the module by its directory location if you use the <code class="language-plaintext highlighter-rouge">-p</code> (or <code class="language-plaintext highlighter-rouge">--project-dir</code>) option:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle <span class="nt">-p</span> b/b1 build
</code></pre></div></div>

<p>It is also possible to execute the <code class="language-plaintext highlighter-rouge">build.gradle</code> file directly by using the <code class="language-plaintext highlighter-rouge">-b</code> (or <code class="language-plaintext highlighter-rouge">--build-file</code>) option:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle <span class="nt">-b</span> b/b1/build.gradle build
</code></pre></div></div>

<p>This last approach is discouraged in multi-module projects (more information can be found in the <a href="https://docs.gradle.org/2.9/userguide/tutorial_gradle_command_line.html#sec:selecting_build">Selecting which build to execute</a> chapter in the Gradle user manual). Please note that only a limited set of tasks necessary to generate the required dependencies are executed. In particular, no tests are executed on the upstream modules, i.e. <code class="language-plaintext highlighter-rouge">a1</code> will be built without verification of its accommodating unit tests. If you would like to build more than one module, just add the modules and their corresponding tasks:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle :b:b1:build :b:b2:build
</code></pre></div></div>

<h2 id="build-needed">Build Needed</h2>

<p>The <code class="language-plaintext highlighter-rouge">buildNeeded</code> is similar to the <code class="language-plaintext highlighter-rouge">build</code> task in that it builds a module and all upstream modules that it depends on. The difference is that it performs a full build of the upstream modules, including tests.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle b:b1:buildNeeded
</code></pre></div></div>

<p>Consequently, both <code class="language-plaintext highlighter-rouge">a1</code> and <code class="language-plaintext highlighter-rouge">b1</code> will be built fully.</p>

<h2 id="build-dependents">Build Dependents</h2>

<p>When you have finished the implementation of your <code class="language-plaintext highlighter-rouge">b1</code> feature, you would probably like to make sure that all downstream modules that depend on <code class="language-plaintext highlighter-rouge">b1</code> still work. To build the <code class="language-plaintext highlighter-rouge">b1</code> project and its depending project(s), in this example represented by the <code class="language-plaintext highlighter-rouge">b1-itest</code> project you can use the <code class="language-plaintext highlighter-rouge">buildDependents</code> task:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle b:b1:buildDependents
</code></pre></div></div>

<h2 id="avoid-rebuilding-project-dependencies">Avoid Rebuilding Project Dependencies</h2>

<p>What about those occasions when you are in the middle of a refactoring, there are no upstream project changes and you know for sure that you have broken downstream dependencies, but you would like to know if just the specific module compiles and its tests pass? Enter the <code class="language-plaintext highlighter-rouge">-a</code> (or <code class="language-plaintext highlighter-rouge">--no-rebuild</code>) option:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gradle <span class="nt">-a</span> b:b1:build
</code></pre></div></div>

<p>Consequently, this module build will fail if the upstream dependencies have not been built previously or if you have executed <code class="language-plaintext highlighter-rouge">gradle clean</code>. Likewise, you may get a false positive build if an upstream dependency has been updated and you still build against the old binary version.</p>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://docs.gradle.org/2.9/userguide/userguide.html">Gradle user guide</a>.</li>
  <li><a href="https://docs.gradle.org/2.9/userguide/java_plugin.html">The Java Plugin</a> - Gradle user guide.</li>
  <li><a href="https://docs.gradle.org/2.9/userguide/multi_project_builds.html">Multi-project builds</a> - Gradle user guide.</li>
  <li><a href="https://docs.gradle.org/2.9/userguide/tutorial_gradle_command_line.html#sec:selecting_build">Selecting which build to execute</a> - Gradle user guide.</li>
  <li><a href="https://docs.gradle.org/2.9/userguide/gradle_command_line.html">Gradle command line</a> - Appendix D in the Gradle user guide.</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2015-12-06T00:00:00+01:00">December 6, 2015</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2015/11/23/reusing-spring-boots-dependency-management/" class="pagination--pager" title="Reusing Spring Boot’s Dependency Management
">Previous</a>
    
    
      <a href="/blog/2016/03/03/custom-resource-for-generating-lambdas/" class="pagination--pager" title="Custom Resource for Generating Lambdas
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/12/02/serverless-twilio-dictionary/" rel="permalink">Serverless Twilio Dictionary
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">I recently started working at Twilio, a communications company that enables services like voice, text, chat and video globally through APIs. As part of the o...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/10/11/eventbridge-ec2-spot-instances/" rel="permalink">EventBridge and EC2 Spot Instances
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">In a recent project, we were using AWS EC2 Spot instances as part of our cloud test environment. A good solution which catered for cost savings, but as expec...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/09/01/automating-dependency-updates/" rel="permalink">Automating Dependency Updates
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Updating project dependencies is a task that is often neglected, especially in legacy projects that are “done” and just work without changes. It is easy to u...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2020/03/23/aws-cdk-mfa/" rel="permalink">AWS CDK MFA
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">The AWS CDK (Cloud Development Kit) is a welcome contribution to the “Infrastructure as Code” family. It is a development framework that allows you to config...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Mattias Severson. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
